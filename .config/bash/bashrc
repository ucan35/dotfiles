# ~/.bashrc

# If not running interactively, don't do anything
[[ $- != *i* ]] && return

function GIT_BRANCH {
    local git_branch
    git_branch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null)
    [ -n "$git_branch" ] && echo "($git_branch)" || true
}

function NETNS_NAME {
    local netns_name
    # Predefined passwordless permission for `sudo ip netns identify` command.
    netns_name=$(sudo ip netns identify)
    [ -n "$netns_name" ] && echo "@$netns_name " || true
}

PS1='[$?] [\A] [\u@\h $(NETNS_NAME)\W] $(GIT_BRANCH)\n\$ '

# Check the window size after each command and, if necessary,
# Update the values of LINES and COLUMNS.
shopt -s checkwinsize

# bash history configurations
HISTSIZE=99999
HISTFILESIZE=-1
HISTCONTROL=ignoredups

export EDITOR=nvim

# enable fzf keybindings, https://github.com/junegunn/fzf
source /usr/share/doc/fzf/examples/key-bindings.bash
source /usr/share/doc/fzf/examples/completion.bash

# gnu global with pygments (and universal-ctags), https://www.gnu.org/software/global/, http://pygments.org/
# https://github.com/universal-ctags/ctags
export GTAGSCONF=/usr/share/gtags/gtags.conf
export GTAGSLABEL=pygments

export XDG_CONFIG_HOME=~/.config
export XDG_CACHE_HOME=~/.cache
export XDG_DATA_HOME=~/.local/share

# https://wiki.archlinux.org/index.php/XDG_Base_Directory
export HISTFILE="$XDG_CACHE_HOME"/bash/bash_history
export LESSHISTFILE="$XDG_CACHE_HOME"/less/lesshst

[[ -f "$XDG_CONFIG_HOME"/bash/bash_aliases ]] && . "$XDG_CONFIG_HOME"/bash/bash_aliases
